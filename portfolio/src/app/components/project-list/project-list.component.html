<div class="proj-page">

  <!-- ===== HERO: Text | Code | Viz ===== -->
  <section class="proj-hero" data-section="hero"
           [class.visible]="isSectionVisible('hero')">
    <div class="hero-noise"></div>
    <div class="hero-mesh"></div>

    <!-- LEFT: Hero text -->
    <div class="hero-inner">
      <div class="hero-eyebrow">
        <span class="eyebrow-line"></span>
        <span class="eyebrow-text">{{ 'proj.badge' | translate }}</span>
        <span class="eyebrow-line"></span>
      </div>
      <h1 class="hero-massive">{{ 'proj.hero_title' | translate }}</h1>
      <p class="hero-lead">{{ 'proj.hero_subtitle' | translate }}</p>
    </div>

    <!-- CENTER + RIGHT: Code → Viz -->
    <div class="code-viz-row">

      <!-- Code Editor -->
      <div class="code-editor">
        <div class="editor-titlebar">
          <div class="ed-dot"></div>
          <div class="ed-dot"></div>
          <div class="ed-dot"></div>
          <span class="ed-filename">graph_builder.py</span>
          <span class="ed-status">● running</span>
        </div>
        <div class="editor-body" id="heroEditorBody"></div>
      </div>

      <!-- Horizontal connector -->
      <div class="h-connector">
        <div class="hc-flow">
          <div class="hc-dot"></div>
          <div class="hc-dot"></div>
          <div class="hc-dot"></div>
          <div class="hc-dot"></div>
          <div class="hc-dot"></div>
        </div>
        <span class="hc-label">stdout</span>
      </div>

      <!-- Viz output -->
      <div class="viz-panel">
        <div class="viz-titlebar">
          <span class="viz-title">▸ output</span>
          <div class="viz-live">
            <div class="viz-live-dot"></div>
            live
          </div>
        </div>
        <div class="viz-canvas-wrap">
          <canvas id="heroVizCanvas"></canvas>
        </div>
        <div class="viz-stats">
          <div class="viz-stat">nodes: <span id="heroStatNodes">0</span></div>
          <div class="viz-stat">edges: <span id="heroStatEdges">0</span></div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== CATEGORY FILTER ===== -->
  <section class="filter-strip" data-section="filter"
           [class.visible]="isSectionVisible('filter')">
    <div class="filter-inner">
      <button class="filter-pill" *ngFor="let cat of categories"
              [class.active]="selectedCategory === cat"
              (click)="selectCategory(cat)">
        {{ getCategoryLabel(cat) }}
      </button>
    </div>
  </section>

  <!-- ===== FEATURED PROJECTS ===== -->
  <section class="featured-section" data-section="featured"
           [class.visible]="isSectionVisible('featured')"
           *ngIf="featuredProjects.length > 0">
    <div class="container">
      <div class="section-head">
        <span class="section-label">{{ 'proj.featured_label' | translate }}</span>
        <h2>{{ 'proj.featured_title' | translate }}</h2>
      </div>

      <div class="featured-grid">
        <div class="feat-card" *ngFor="let proj of featuredProjects; let i = index"
             [style.--pc]="proj.color"
             [style.--pg]="proj.gradient"
             [style.animation-delay]="(i * 0.15) + 's'"
             [class.expanded]="expandedProject === proj.id"
             (click)="toggleProject(proj.id)">

          <div class="feat-glow"></div>
          <div class="feat-accent"></div>

          <div class="feat-top">
            <div class="feat-icon" [style.background]="proj.gradient">
              <mat-icon>{{ proj.icon }}</mat-icon>
            </div>
            <div class="feat-status" [attr.data-status]="proj.status">
              {{ getStatusLabel(proj.status) }}
            </div>
          </div>

          <h3 class="feat-title">{{ proj.title }}</h3>
          <p class="feat-subtitle">{{ proj.subtitle }}</p>
          <p class="feat-desc">{{ proj.description }}</p>

          <div class="feat-expand" [class.open]="expandedProject === proj.id">
            <div class="feat-highlights" *ngIf="proj.highlights">
              <div class="feat-hl" *ngFor="let hl of proj.highlights">
                <span class="hl-arrow" [style.color]="proj.color">▹</span>
                {{ hl }}
              </div>
            </div>
          </div>

          <div class="feat-techs">
            <span class="feat-tech" *ngFor="let tech of proj.technologies">{{ tech }}</span>
          </div>

          <div class="feat-footer">
            <span class="feat-date">{{ proj.date }}</span>
            <span class="feat-cat">{{ proj.category }}</span>
            <mat-icon class="feat-arrow">{{ expandedProject === proj.id ? 'expand_less' : 'expand_more' }}</mat-icon>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== OTHER PROJECTS ===== -->
  <section class="other-section" data-section="other"
           [class.visible]="isSectionVisible('other')"
           *ngIf="otherProjects.length > 0">
    <div class="container">
      <div class="section-head">
        <span class="section-label">{{ 'proj.other_label' | translate }}</span>
        <h2>{{ 'proj.other_title' | translate }}</h2>
      </div>

      <div class="other-grid">
        <div class="other-card" *ngFor="let proj of otherProjects; let i = index"
             [style.--pc]="proj.color"
             [style.--pg]="proj.gradient"
             [style.animation-delay]="(i * 0.12) + 's'"
             [class.expanded]="expandedProject === proj.id"
             (click)="toggleProject(proj.id)">

          <div class="other-accent"></div>

          <div class="other-top">
            <div class="other-icon">
              <mat-icon [style.color]="proj.color">{{ proj.icon }}</mat-icon>
            </div>
            <div class="other-meta">
              <span class="other-status" [attr.data-status]="proj.status">{{ getStatusLabel(proj.status) }}</span>
              <span class="other-date">{{ proj.date }}</span>
            </div>
          </div>

          <h3>{{ proj.title }}</h3>
          <p class="other-subtitle">{{ proj.subtitle }}</p>
          <p class="other-desc">{{ proj.description }}</p>

          <div class="other-expand" [class.open]="expandedProject === proj.id">
            <div class="other-highlights" *ngIf="proj.highlights">
              <div class="other-hl" *ngFor="let hl of proj.highlights">
                <span class="hl-arrow" [style.color]="proj.color">▹</span>{{ hl }}
              </div>
            </div>
          </div>

          <div class="other-techs">
            <span class="other-tech" *ngFor="let tech of proj.technologies">{{ tech }}</span>
          </div>

          <div class="other-footer">
            <mat-icon class="other-arrow">{{ expandedProject === proj.id ? 'expand_less' : 'expand_more' }}</mat-icon>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== CTA ===== -->
  <section class="proj-cta" data-section="cta"
           [class.visible]="isSectionVisible('cta')">
    <div class="cta-mesh"></div>
    <div class="container cta-inner">
      <h2>{{ 'proj.cta_title' | translate }}</h2>
      <p>{{ 'proj.cta_subtitle' | translate }}</p>
      <div class="cta-btns">
        <a routerLink="/contact" class="cta-btn-primary">
          <mat-icon>send</mat-icon> {{ 'exp.cta_contact' | translate }}
        </a>
      </div>
    </div>
  </section>

</div>
